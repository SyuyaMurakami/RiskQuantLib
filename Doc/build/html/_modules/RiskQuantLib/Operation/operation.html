

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RiskQuantLib.Operation.operation &mdash; RiskQuantLib 0.4.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/readthedocs-custom.css" />

  
      <script src="../../../_static/documentation_options.js?v=5bfaad31"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            RiskQuantLib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">RiskQuantLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Create_Project.html">Create A New Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Build_Project.html">Build Your Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Instrument.html">Instrument</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Instrument_List.html">Instrument List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tool.html">Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Project_Management.html">Project Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Variable_Type.html">Variable Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../With_QuantLib.html">With QuantLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../With_Pandas.html">With Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../With_ORM.html">With ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../E_project.html">Process Graph-Structure Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../With_Github.html">With Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Advance.html">Advance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../About.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">RiskQuantLib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../RiskQuantLib.html">RiskQuantLib</a></li>
      <li class="breadcrumb-item active">RiskQuantLib.Operation.operation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for RiskQuantLib.Operation.operation</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1">#coding = utf-8</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Iterable</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">RiskQuantLib.Operation.vectorization</span><span class="w"> </span><span class="kn">import</span> <span class="n">vectorization</span>

<span class="c1">#&lt;import&gt;</span>
<span class="c1">#&lt;/import&gt;</span>

<div class="viewcode-block" id="operation">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">operation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    operation() is the function class that makes all RiskQuantLib list object functional.</span>
<span class="sd">    Any RiskQuantLib list class should inherit from this class to own certain functions,</span>
<span class="sd">    such as groupBy, execFunc, etc.</span>

<span class="sd">    Users can define their own functions here to set new attribute function to</span>
<span class="sd">    RiskQuantLib list class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="operation.setAll">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.setAll">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">setAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">List</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update all elements by the list of new elements. Old elements will be deleted.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        List : list</span>
<span class="sd">            A collection of RiskQuantLib instrument objects.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">=</span> <span class="n">List</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_tunnelingGetitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the attribute of elements in present list which meet requirements and</span>
<span class="sd">        find elements of that attribute, if it is iterable. If this attribute</span>
<span class="sd">        is not iterable, it returns collection of this attribute itself.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subIndex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="nb">filter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(())</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s2">&quot;__call__&quot;</span><span class="p">):</span>
                <span class="nb">filter</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">filter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
                <span class="n">subIndex</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">attrName</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(())</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span><span class="o">&gt;=</span><span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s2">&quot;__call__&quot;</span><span class="p">):</span>
                <span class="nb">filter</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">subIndex</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">filter</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">subIndex</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">attrName</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attrName</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="nb">filter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="kc">True</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">subIndex</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span> <span class="ow">or</span> <span class="n">subIndex</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">attrName</span><span class="p">)]</span>
                <span class="n">thisLayer</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span><span class="n">key</span><span class="o">=</span><span class="n">tmp</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">thisLayer</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">attrName</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">attrName</span><span class="p">)]</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">subIndex</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">thisLayer</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;__getitem__&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">[</span><span class="n">subIndex</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="n">subIndex</span><span class="p">],</span><span class="n">Iterable</span><span class="p">)]</span>
                    <span class="n">nextLayer</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span><span class="n">key</span><span class="o">=</span><span class="n">tmp</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">nextLayer</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">thisLayer</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;__getitem__&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">[</span><span class="n">subIndex</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="n">subIndex</span><span class="p">],</span><span class="n">Iterable</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nextLayer</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="n">subIndex</span><span class="p">]</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;__getitem__&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">thisLayer</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nextLayer</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
                <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">thisLayer</span> <span class="k">if</span> <span class="nb">filter</span><span class="p">(</span><span class="n">i</span><span class="p">)])</span>
                <span class="k">return</span> <span class="n">tmp</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
                <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nextLayer</span> <span class="k">if</span> <span class="nb">filter</span><span class="p">(</span><span class="n">i</span><span class="p">)])</span>
                <span class="k">return</span> <span class="n">tmp</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
            <span class="n">thisLayer</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">thisLayer</span> <span class="k">if</span> <span class="nb">filter</span><span class="p">(</span><span class="n">i</span><span class="p">)])</span>
            <span class="k">return</span> <span class="n">tmp</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function makes RiqkQuantLib list object selectable. Use [] to call this function.</span>
<span class="sd">        Mixed index is used here. By calling [], you can index either element or attribute, or</span>
<span class="sd">        elements of attribute.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item : str or list or slice or tuple</span>
<span class="sd">            If a string is given, all elements will be examined, if &#39;code&#39; attribute equals</span>
<span class="sd">            to the given string, return the first element that meets this requirement.</span>

<span class="sd">            If no element code meets this requirement, try to return a operation object,</span>
<span class="sd">            holding values of attribute whose name equals to the given string.</span>

<span class="sd">            If a slice or int number is given, this function behaves like iloc, returns the</span>
<span class="sd">            item-th element or a collection of elements.</span>

<span class="sd">            If a list is given, return all elements whose code in the given list. If no code</span>
<span class="sd">            in the given list, return a 2-dimension array of attribute values, where attribute</span>
<span class="sd">            name is in the given list.</span>

<span class="sd">            If a tuple is given, it returns a operation object, but the elements of this object</span>
<span class="sd">            depends on how you specify your parameter. For the first element of tuple, it must be</span>
<span class="sd">            a string, specify the attribute you want to choose.</span>

<span class="sd">            For the second element of tuple, you can pass a lambda function or any</span>
<span class="sd">            function into tuple, if you do this, the function will be used to filter your results.</span>

<span class="sd">            For the second element of tuple, you can also pass a slice. If you pass a slice into</span>
<span class="sd">            tuple, RiskQuantLib will assume the attribute value is iterable, and again, get the</span>
<span class="sd">            element of the attribute with this slice.</span>

<span class="sd">            If you want to select some elements of the attribute, and do it for every element of</span>
<span class="sd">            present list, and filter your result. You may pass a slice and a function at the same</span>
<span class="sd">            time. In this case, your tuple has three elements.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">item</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnelingGetitem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">tuple</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnelingGetitem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">slice</span><span class="p">):</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="n">item</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">tmp</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">item</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmpList</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
                <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">tmpList</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">tmp</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">propertyArray</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">item</span><span class="p">]</span>
                <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">propertyArray</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">yield</span> <span class="n">v</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a RiskQuantLib list object to a list or another RiskQuantLib list object.</span>
<span class="sd">        All attributes of the RiskQuantLib list will be neglected, only elements will be added to</span>
<span class="sd">        the merged list.</span>

<span class="sd">        This use shallow copy. After add finish, all elements refer to the original</span>
<span class="sd">        elements. Change to the original will render to changes of the results. If</span>
<span class="sd">        you want to use a deep copy add, call &#39;.add()&#39; rather than use &#39;+&#39;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : list or RiskQuantLib list</span>
<span class="sd">            The other RiskQuantLib list object or a collection of RiskQuantLib instrument object.</span>
<span class="sd">        useObj : bool</span>
<span class="sd">            If true, return a RiskQuantLib list object; if false, return a list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list or RiskQuantLib list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Subtract a list or another RiskQuantLib list object from a RiskQuantLib list object.</span>
<span class="sd">        All attributes of the RiskQuantLib list will be neglected, only elements will be subtracted</span>
<span class="sd">        from the first list.</span>

<span class="sd">        This use shallow copy. After sub finish, all elements refer to the original</span>
<span class="sd">        elements. Change to the original will render to changes of the results. If</span>
<span class="sd">        you want to use a deep copy sub, call &#39;.sub()&#39; rather than use &#39;-&#39;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : list or RiskQuantLib list</span>
<span class="sd">            The other RiskQuantLib list object or a collection of RiskQuantLib instrument object.</span>
<span class="sd">        useObj : bool</span>
<span class="sd">            If true, return a RiskQuantLib list object; if false, return a list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list or RiskQuantLib list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This returns a list of string, showing the code of each element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns the length of RiskQuantLib list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_sortIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sortObj</span><span class="p">):</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
        <span class="n">sortList</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sortObj</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sortObj</span><span class="p">,</span><span class="n">i</span><span class="p">))</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">))</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sortObj</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">sortList</span><span class="p">)</span>

<div class="viewcode-block" id="operation.add">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.add">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function uses deep copy. It returns the addition of copies of two RiskQuantLib lists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">all</span></div>


<div class="viewcode-block" id="operation.sub">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.sub">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">useObj</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function uses deep copy. It returns the subtraction of copies of two RiskQuantLib lists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">all</span></div>


<div class="viewcode-block" id="operation.uniqueCode">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.uniqueCode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">uniqueCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">keep</span> <span class="o">=</span> <span class="s1">&#39;First&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns a RiskQuantLib list object, where the code value</span>
<span class="sd">        is unique.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, operation will done in present list object.</span>
<span class="sd">            If false, operation will done in a copy of present list object.</span>
<span class="sd">        keep : str</span>
<span class="sd">            Only support &#39;First&#39; or &#39;Last&#39;. If multiple elements have the same</span>
<span class="sd">            code value. The first or last element will be kept, given your choice.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib list object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">codeList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">code</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;First&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;Last&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;uniqueCode Function Can Only Accept &#39;Keep&#39; Parameter as First or Last&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">([[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">codeList</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setAll</span><span class="p">([[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">codeList</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="operation.uniqueAttr">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.uniqueAttr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">uniqueAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">keep</span> <span class="o">=</span> <span class="s1">&#39;First&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns a RiskQuantLib list object, where the attribute value</span>
<span class="sd">        is unique.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameString :str</span>
<span class="sd">            The attribute name that you want to get the unique value list from.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, operation will done in present list object.</span>
<span class="sd">            If false, operation will done in a copy of present list object.</span>
<span class="sd">        keep : str</span>
<span class="sd">            Only support &#39;First&#39; or &#39;Last&#39;. If multiple elements have the same</span>
<span class="sd">            attribute value. The first or last element will be kept, given your choice.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib list object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">propertyValueList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">)]))</span>
        <span class="k">if</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;First&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;Last&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;uniqueAttr Function Can Only Accept &#39;Keep&#39; Parameter as First or Last&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">([[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyValueList</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setAll</span><span class="p">([[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyValueList</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="operation.apply">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.apply">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">applyFunction</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will apply the given function to each element of RiskQuantLib list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">applyFunction</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmp</span></div>


<div class="viewcode-block" id="operation.groupBy">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.groupBy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">groupBy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function use pandas.DataFrame.groupby as engine. Its behavior is totally</span>
<span class="sd">        the same with pandas.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute that you want to group data by.</span>
<span class="sd">        useObj : bool</span>
<span class="sd">            If true, return a RiskQuantLib list object, each element of which is also a</span>
<span class="sd">            RiskQuantLib list object. Each element will be marked by setting the attribute</span>
<span class="sd">            as the common value.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, operation will be done in present RiskQuantLib list object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="n">attrName</span> <span class="o">=</span> <span class="p">[</span><span class="n">attrName</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">groupBy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">attrName</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]])</span>
        <span class="n">groupBy</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">groupBy</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">attrName</span><span class="p">)[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span>

        <span class="n">kvList</span> <span class="o">=</span> <span class="p">[([</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">k</span><span class="p">]</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span> <span class="k">else</span> <span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">v</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df</span><span class="p">]</span>
        <span class="n">attrValueList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">kvList</span><span class="p">]</span>
        <span class="n">securityList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">kvList</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
                <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">attrValueList</span><span class="p">]</span>
                <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">objList</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">attrValueList</span><span class="p">]</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">objList</span><span class="p">,</span><span class="n">securityList</span><span class="p">)]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">attrName</span><span class="p">[</span><span class="n">q</span><span class="p">],</span><span class="n">i</span><span class="p">[</span><span class="n">q</span><span class="p">])</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">attrName</span><span class="p">))]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">attrValueList</span><span class="p">,</span><span class="n">objList</span><span class="p">)]</span>
            <span class="n">returnObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">objList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">returnObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">attrValueList</span><span class="p">,</span><span class="n">securityList</span><span class="p">))</span></div>


<div class="viewcode-block" id="operation.groupByFunc">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.groupByFunc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">groupByFunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function use pandas.DataFrame.groupby as engine. Its behavior is totally</span>
<span class="sd">        the same with pandas.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        func : function</span>
<span class="sd">            Elements will be divided into groups by the return values of this function.</span>
<span class="sd">        useObj : bool</span>
<span class="sd">            If true, return a RiskQuantLib list object, each element of which is also a</span>
<span class="sd">            RiskQuantLib list object. Each element will be marked by setting the attribute</span>
<span class="sd">            as the common value.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, operation will be done in present RiskQuantLib list object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attrValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="n">groupBy</span> <span class="o">=</span> <span class="n">attrValue</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
        <span class="n">groupBy</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="nb">str</span> <span class="k">else</span> <span class="s2">&quot;groupByAttr&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">groupBy</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="n">attrName</span> <span class="o">=</span> <span class="n">groupBy</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">groupBy</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span>
        <span class="n">groupBy</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">groupBy</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">attrName</span><span class="p">)[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span>

        <span class="n">kvList</span> <span class="o">=</span> <span class="p">[([</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">k</span><span class="p">]</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span> <span class="k">else</span> <span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">v</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df</span><span class="p">]</span>
        <span class="n">attrValueList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">kvList</span><span class="p">]</span>
        <span class="n">securityList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">kvList</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
                <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">attrValueList</span><span class="p">]</span>
                <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">objList</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">attrValueList</span><span class="p">]</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">objList</span><span class="p">,</span><span class="n">securityList</span><span class="p">)]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">attrName</span><span class="p">[</span><span class="n">q</span><span class="p">],</span><span class="n">i</span><span class="p">[</span><span class="n">q</span><span class="p">])</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">attrName</span><span class="p">))]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">attrValueList</span><span class="p">,</span><span class="n">objList</span><span class="p">)]</span>
            <span class="n">returnObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">objList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">returnObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">attrValueList</span><span class="p">,</span><span class="n">securityList</span><span class="p">))</span></div>


<div class="viewcode-block" id="operation.sum">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.sum">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will sum the value of each element, given the attribute name.</span>
<span class="sd">        If some elements don&#39;t have the attribute, an numpy.nan will be used, and</span>
<span class="sd">        the result will skip this value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute name whose value you want to sum.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, the &#39;attributeSum&#39; property will be added to present object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="o">+</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nansum</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nansum</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">])</span></div>


<div class="viewcode-block" id="operation.mean">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.mean">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will average the value of each element, given the attribute name.</span>
<span class="sd">        If some elements don&#39;t have the attribute, an numpy.nan will be used, and</span>
<span class="sd">        the result will skip this value when calculating mean.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute name whose value you want to average.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, the &#39;attributeMean&#39; property will be added to present object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="o">+</span><span class="s1">&#39;Mean&#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">])</span></div>


<div class="viewcode-block" id="operation.std">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.std">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">std</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will calculate the standard deviation of value of each element,</span>
<span class="sd">        given the attribute name. If some elements don&#39;t have the attribute, an numpy.nan will be used, and</span>
<span class="sd">        the result will skip this value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute name whose value you want to calculate standard deviation.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, the &#39;attributeStd&#39; property will be added to present object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="o">+</span><span class="s1">&#39;Std&#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">])</span></div>


<div class="viewcode-block" id="operation.execFunc">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.execFunc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">execFunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">functionName</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will execute instance function for every element in present RiskQuantLib list object,</span>
<span class="sd">        given the function name. If some elements don&#39;t have the function, a Null function will be used, and</span>
<span class="sd">        the result will skip the execution for that element.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        functionName : str</span>
<span class="sd">            The function that element has, and you want to call.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">functionName</span><span class="p">,</span><span class="k">lambda</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwarg</span><span class="p">:</span><span class="kc">None</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmp</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution Failed As Follows:&#39;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Instrument Type:&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Function Name:&#39;</span><span class="p">,</span> <span class="n">functionName</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exception Info:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span></div>


<div class="viewcode-block" id="operation.paraFunc">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.paraFunc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">paraFunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">functionName</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will execute instance function for every element in present RiskQuantLib list object by parallel,</span>
<span class="sd">        which means elements will be serialized and sent to different processes.</span>

<span class="sd">        If some elements don&#39;t have the function which named as you specify, a Null function will be used, and</span>
<span class="sd">        the result will skip the execution for that element.</span>

<span class="sd">        The call will be delayed until you run currentRiskQuantLibList.paraRun().</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        functionName : str</span>
<span class="sd">            The function that element has, and you want to call.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        operation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paraQueue</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_paraQueue&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paraQueue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paraQueue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">functionName</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="operation.paraRun">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.paraRun">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">paraRun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nJobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is the trigger of run paralleled function for every element in this RiskQuantLib list. Before you use</span>
<span class="sd">        this function, you should call someList.paraFunc(&#39;functionName&#39;) for more than one time to tell RiskQuantLib</span>
<span class="sd">        what function you want to parallel.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        operation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paraQueue</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_paraQueue&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paraQueue</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_coll</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">paraTmp</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">functionName</span><span class="p">,</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwarg</span><span class="p">:</span><span class="kc">None</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">functionName</span><span class="p">,</span><span class="n">args</span><span class="p">,</span><span class="n">kwargs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paraQueue</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">paraTmp</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">joblib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">nJobs</span><span class="p">)(</span><span class="n">delayed</span><span class="p">(</span><span class="n">_coll</span><span class="p">)(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_paraQueue</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span> <span class="n">tmp</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Parallel Failed:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="operation.vecApply">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.vecApply">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">vecApply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lambdaFunction</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function is like operation.apply, it will apply the given function to each </span>
<span class="sd">        element of RiskQuantLib list. The passed function should be one-parameter function,</span>
<span class="sd">        whose parameter represents the element of current RiskQuantLib list.</span>

<span class="sd">        The difference is this function will try to vectorize the calculation to speed up.</span>
<span class="sd">        It will convert the attribute to np.array and operate mathematical calculation.</span>

<span class="sd">        Notice: Only Pure Mathematic Function can be vectorized, this is to say, any logic key word</span>
<span class="sd">        of python, like &#39;in&#39;, &#39;if&#39;, &#39;for&#39;, etc, can Not be used in passed function. If must be pure</span>
<span class="sd">        math formula. Luckily, all numpy function can be used. If you want to do some logistic calculation,</span>
<span class="sd">        you should make sure you write function as logic-matrix-like.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        operation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">allElement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">allElement</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dynamicClass</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;tmp&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">vectorization</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;lambdaFuncName&#39;</span><span class="p">:</span> <span class="n">lambdaFunction</span><span class="p">})</span>
            <span class="n">dynamicObj</span> <span class="o">=</span> <span class="n">dynamicClass</span><span class="p">(</span><span class="n">allElement</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">vectorization</span><span class="p">,</span> <span class="n">dynamicObj</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="s1">&#39;lambdaFuncName&#39;</span><span class="p">)()</span>
            <span class="k">del</span> <span class="n">dynamicObj</span><span class="p">,</span> <span class="n">dynamicClass</span>
            <span class="k">return</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="operation.vecFunc">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.vecFunc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">vecFunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">functionName</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function is like operation.execFunc, it will call the given function of each </span>
<span class="sd">        element of RiskQuantLib list. The passed function should be the attribute function </span>
<span class="sd">        of element of current RiskQuantLib List.</span>

<span class="sd">        The difference is this function will try to vectorize the calculation to speed up.</span>
<span class="sd">        It will convert the attribute to np.array and operate mathematical calculation.</span>

<span class="sd">        Notice: Only Pure Mathematic Function can be vectorized, this is to say, any logic key word</span>
<span class="sd">        of python, like &#39;in&#39;, &#39;if&#39;, &#39;for&#39;, etc, can Not be used in passed function. If must be pure</span>
<span class="sd">        math formula. Luckily, all numpy function can be used. If you want to do some logistic calculation,</span>
<span class="sd">        you should make sure you write function as logic-matrix-like.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        operation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">allElement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">allElement</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">functionObj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">allElement</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">functionName</span><span class="p">,</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">argsSub</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargsSub</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">functionObjName</span> <span class="o">=</span> <span class="n">functionName</span> <span class="o">+</span> <span class="s1">&#39;Attribute&#39;</span>
            <span class="n">dynamicClass</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">functionName</span><span class="p">,</span> <span class="p">(</span><span class="n">vectorization</span><span class="p">,),</span> <span class="p">{</span><span class="n">functionObjName</span><span class="p">:</span> <span class="n">functionObj</span><span class="p">})</span>
            <span class="n">dynamicObj</span> <span class="o">=</span> <span class="n">dynamicClass</span><span class="p">(</span><span class="n">allElement</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">vectorization</span><span class="p">,</span> <span class="n">dynamicObj</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">functionObjName</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">dynamicObj</span><span class="p">,</span> <span class="n">dynamicClass</span>
            <span class="k">return</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="operation.copy">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.copy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">deep</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a copy of present RiskQuantLib list object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">deep</span><span class="p">:</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmp</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmp</span></div>


<div class="viewcode-block" id="operation.sort">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.sort">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">propertyList</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span><span class="n">reverse</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sort the present RiskQuantLib list by attributes. You can also sort it by a single</span>
<span class="sd">        attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">propertyList</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">([]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span> <span class="o">=</span> <span class="p">[</span><span class="n">propertyList</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span> <span class="o">=</span> <span class="n">propertyList</span>

        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="n">sortBy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">])</span>
            <span class="n">sortBy</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">sortBy</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="ow">not</span> <span class="n">reverse</span><span class="p">)</span>
            <span class="n">sortedList</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">sortedList</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">sortBy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">tmpObj</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">])</span>
            <span class="n">sortBy</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">sortBy</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="ow">not</span> <span class="n">reverse</span><span class="p">)</span>
            <span class="n">sortedList</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">sortedList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sortBy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">])</span>
            <span class="n">sortBy</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">sortBy</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="ow">not</span> <span class="n">reverse</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>


<div class="viewcode-block" id="operation.fillna">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.fillna">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fillna</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propertyList</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the nan value or blank string will the given value.</span>
<span class="sd">        If attribute doesn&#39;t exist, nothing will be done.</span>
<span class="sd">        You can fill the nan value by single attribute or a list of attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">RiskQuantLib.Tool.mathTool</span><span class="w"> </span><span class="kn">import</span> <span class="n">isnan</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">propertyList</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">([]):</span>
            <span class="n">propertyList</span> <span class="o">=</span> <span class="p">[</span><span class="n">propertyList</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpList</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
            <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpList</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpList</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tmpList</span></div>


<div class="viewcode-block" id="operation.reIndex">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.reIndex">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indexList</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">useObj</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a new RiskQuantLib list object whose elements are chosen according to</span>
<span class="sd">        the index, the index of new list element must be in th indexList to be included.</span>
<span class="sd">        If more than one elements meet requirement, only the first one will be kept.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmpList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">attrName</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indexList</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">tmpList</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">tmpList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tmpList</span></div>


<div class="viewcode-block" id="operation.str">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.str">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>


<div class="viewcode-block" id="operation.rolling">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.rolling">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rolling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">windowNumber</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">useObj</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element, This function will collect the n elements before</span>
<span class="sd">        that element, create a new RiskQuantLib list object to holding it. The new list</span>
<span class="sd">        will be set as an attribute of &#39;rolling&#39;, thus the present element can reach to</span>
<span class="sd">        the information of its former elements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rollingList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">[</span><span class="nb">max</span><span class="p">((</span><span class="n">i</span><span class="o">-</span><span class="n">windowNumber</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">):(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">rollingObj</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))]</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rollingObj</span><span class="p">]</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rollingObj</span><span class="p">,</span><span class="n">rollingList</span><span class="p">)]</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;rolling&#39;</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">rollingObj</span><span class="p">)]</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;rollingWindow&#39;</span><span class="p">,</span> <span class="n">windowNumber</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="n">returnObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">rollingObj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">returnObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rollingList</span></div>


<div class="viewcode-block" id="operation.new">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.new">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">new</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a totally new RiskQuantLib list object like this.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">tmpObj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">tmpObj</span></div>


<div class="viewcode-block" id="operation.filter">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.filter">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filterFunction</span><span class="p">,</span><span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a RiskQuantLib list object given the fiter function.</span>
<span class="sd">        This is used to choose some elements which meet your requirements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resultList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">filterFunction</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">resultList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">resultList</span></div>


<div class="viewcode-block" id="operation.head">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.head">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numberOfElement</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the first numberOfElement elements of the list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[:</span><span class="n">numberOfElement</span><span class="p">]</span></div>


<div class="viewcode-block" id="operation.tail">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.tail">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">tail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numberOfElement</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the last numberOfElement elements of the list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[(</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">numberOfElement</span><span class="p">):]</span></div>


<div class="viewcode-block" id="operation.haveAttr">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.haveAttr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">haveAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the elements which have certain attributes, if passed a list, the elements which have all</span>
<span class="sd">        attributes in the list will be returned, otherwise an empty list will be returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span><span class="o">==</span><span class="nb">str</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">attrName</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span><span class="o">==</span><span class="nb">list</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="nb">sum</span><span class="p">([</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">attrName</span><span class="p">])</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">attrName</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="operation.isIn">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.isIn">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">isIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the elements which are also in the given list. Use these elements to generate a</span>
<span class="sd">        new RiskQuantLib list and return it. anotherList can be any iterable object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">anotherList</span><span class="p">))</span></div>


<div class="viewcode-block" id="operation.isNotIn">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.isNotIn">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">isNotIn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the elements which are not in the given list. Use these elements to generate a</span>
<span class="sd">        new RiskQuantLib list and return it. anotherList can be any iterable object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">anotherList</span><span class="p">))</span></div>


<div class="viewcode-block" id="operation.union">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.union">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the elements which are in the given list or in the current list. Use these elements</span>
<span class="sd">        to generate a new RiskQuantLib list and return it. anotherList can be any iterable object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">isNotIn</span><span class="p">(</span><span class="n">anotherList</span><span class="p">)</span> <span class="o">+</span> <span class="n">anotherList</span></div>


<div class="viewcode-block" id="operation.match">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.match">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">,</span> <span class="n">targetAttrName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">matchFunctionOnLeft</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="n">matchFunctionOnRight</span><span class="o">=</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element in current rqlList, find all elements that meet requirement</span>
<span class="sd">        matchFunctionOnRight(element_in_another_list) == matchFunctionOnLeft(element_in_this_list)</span>
<span class="sd">        from another RiskQuantLib list object. The elements meeting requirement will be set as an attribute</span>
<span class="sd">        of element_in_this_list.</span>

<span class="sd">        This function is very like rqlList.join, the only difference is that this function is</span>
<span class="sd">        vectorized, thus run with faster speed. Of cause, this function has some drawbacks, it</span>
<span class="sd">        can not deal with complicated relation which is described as coupled equation, while</span>
<span class="sd">        rqlList.join can do it.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anotherList : RiskQuantLib list or list</span>
<span class="sd">            Another list object, holding elements waiting to be selected.</span>
<span class="sd">        targetAttrName : str</span>
<span class="sd">            The attribute name that you want to use to mark collected elements from another list.</span>
<span class="sd">        matchFunctionOnLeft : function</span>
<span class="sd">            This function has and only has one parameter, which stands for element in current list.</span>
<span class="sd">        matchFunctionOnRight : function</span>
<span class="sd">            This function has and only has one parameter, which stands for element in another list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">anotherMatchArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">matchFunctionOnRight</span><span class="p">(</span><span class="n">another</span><span class="p">)</span> <span class="k">for</span> <span class="n">another</span> <span class="ow">in</span> <span class="n">anotherList</span><span class="p">])</span>
        <span class="n">thisMatchArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">matchFunctionOnLeft</span><span class="p">(</span><span class="n">this</span><span class="p">)</span> <span class="k">for</span> <span class="n">this</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">targetObjIDArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="n">anotherMatchArray</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">thisMatchArray</span><span class="p">)</span>

        <span class="n">anotherObjIndexArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">anotherList</span><span class="o">.</span><span class="n">all</span><span class="p">)))</span>
        <span class="n">matchedValueList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">anotherList</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">anotherObjIndexArray</span><span class="p">[</span><span class="n">targetIDList</span><span class="p">]]</span> <span class="k">for</span> <span class="n">targetIDList</span> <span class="ow">in</span> <span class="n">targetObjIDArray</span><span class="p">]</span>

        <span class="n">matchedObjList</span> <span class="o">=</span> <span class="p">[</span><span class="n">anotherList</span><span class="o">.</span><span class="n">new</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">))]</span>
        <span class="p">[</span><span class="n">matchedObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">matchedValue</span><span class="p">)</span> <span class="k">for</span> <span class="n">matchedObj</span><span class="p">,</span><span class="n">matchedValue</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">matchedObjList</span><span class="p">,</span> <span class="n">matchedValueList</span><span class="p">)]</span>
        <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">targetAttrName</span><span class="p">,</span> <span class="n">matchedObj</span><span class="p">)</span> <span class="k">for</span> <span class="n">this</span><span class="p">,</span> <span class="n">matchedObj</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="n">matchedObjList</span><span class="p">)]</span></div>


<div class="viewcode-block" id="operation.link">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.link">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">,</span> <span class="n">targetAttrNameOnLeft</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">targetAttrNameOnRight</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">matchFunctionOnLeft</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="n">matchFunctionOnRight</span><span class="o">=</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element in current rqlList, find all elements that meet requirement</span>
<span class="sd">        matchFunctionOnRight(element_in_another_list) == matchFunctionOnLeft(element_in_this_list)</span>
<span class="sd">        from another RiskQuantLib list object. The elements meeting requirement will be set as an attribute</span>
<span class="sd">        of element_in_this_list.</span>

<span class="sd">        After this is done, for each element in another rqlList, find all elements that meet requirement</span>
<span class="sd">        matchFunctionOnLeft(element_in_this_list) == matchFunctionOnRight(element_in_another_list)</span>
<span class="sd">        from current RiskQuantLib list object. The elements meeting requirement will be set as an attribute</span>
<span class="sd">        of element_in_another_list.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anotherList : RiskQuantLib list or list</span>
<span class="sd">            Another list object, holding elements waiting to be selected.</span>
<span class="sd">        targetAttrNameOnLeft : str</span>
<span class="sd">            The attribute name of present list that you want to use to mark collected elements from another list.</span>
<span class="sd">        targetAttrNameOnRight : str</span>
<span class="sd">            The attribute name of another list that you want to use to mark collected elements from present list.</span>
<span class="sd">        matchFunctionOnLeft : function</span>
<span class="sd">            This function has and only has one parameter, which stands for element in current list.</span>
<span class="sd">        matchFunctionOnRight : function</span>
<span class="sd">            This function has and only has one parameter, which stands for element in another list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">anotherList</span><span class="p">,</span> <span class="n">targetAttrNameOnLeft</span><span class="p">,</span> <span class="n">matchFunctionOnLeft</span><span class="p">,</span> <span class="n">matchFunctionOnRight</span><span class="p">)</span>
        <span class="n">anotherList</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">targetAttrNameOnRight</span><span class="p">,</span> <span class="n">matchFunctionOnRight</span><span class="p">,</span> <span class="n">matchFunctionOnLeft</span><span class="p">)</span></div>


<div class="viewcode-block" id="operation.join">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">,</span> <span class="n">targetAttrName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filterFunction</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element, find all elements that meet requirements from another RiskQuantLib</span>
<span class="sd">        list object. The elements meeting requirement will be set as an attribute of present</span>
<span class="sd">        list.</span>

<span class="sd">        This function is very like pandas.DataFrame.merge.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anotherList : RiskQuantLib list or list</span>
<span class="sd">            Another list object, holding elements waiting to be selected.</span>
<span class="sd">        targetAttrName : str</span>
<span class="sd">            The attribute name that you want to use to mark collected elements from another list.</span>
<span class="sd">        filterFunction : function</span>
<span class="sd">            This function has two parameter, left and right, and must return a bool value.</span>
<span class="sd">            If true is returned, the element will be added. False means not added.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valueList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">another</span> <span class="k">for</span> <span class="n">another</span> <span class="ow">in</span> <span class="n">anotherList</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">filterFunction</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="n">another</span><span class="p">)]</span> <span class="k">for</span> <span class="n">this</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
        <span class="n">valueObj</span> <span class="o">=</span> <span class="p">[</span><span class="n">anotherList</span><span class="o">.</span><span class="n">new</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
        <span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">valueObj</span><span class="p">,</span><span class="n">valueList</span><span class="p">)]</span>
        <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">targetAttrName</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">valueObj</span><span class="p">)]</span></div>


<div class="viewcode-block" id="operation.connect">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.connect">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">,</span> <span class="n">targetAttrNameOnLeft</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">targetAttrNameOnRight</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filterFunction</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="n">unsymmetrical</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">filterFunctionOnLeft</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">presentList</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="n">filterFunctionOnRight</span><span class="o">=</span><span class="k">lambda</span> <span class="n">presentList</span><span class="p">,</span><span class="n">anotherList</span><span class="p">:</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element, find all elements that meet requirements from another RiskQuantLib</span>
<span class="sd">        list object. The elements meeting requirement will be set as an attribute of present</span>
<span class="sd">        list.</span>

<span class="sd">        After this is down, for each element of another RiskQuantLib, find all elements that</span>
<span class="sd">        meet requirements from present RiskQuantLib list object. The elements meeting requirement</span>
<span class="sd">        will be set as an attribute of another list.</span>

<span class="sd">        This function actually calls join twice, but it switch the position of two RiskQuantLib</span>
<span class="sd">        list in the second call.</span>


<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anotherList : RiskQuantLib list or list</span>
<span class="sd">            Another list object, holding elements waiting to be selected.</span>
<span class="sd">        targetAttrNameOnLeft : str</span>
<span class="sd">            The attribute name of present list that you want to use to mark collected elements from another list.</span>
<span class="sd">        filterFunction : function</span>
<span class="sd">            This function has two parameter, left and right, and must return a bool value.</span>
<span class="sd">            If true is returned, the element will be added to each other. False means not added.</span>
<span class="sd">        unsymmetrical : bool</span>
<span class="sd">            If true, different rules will be used when join two list, where filterFunctionOnLeft will be used</span>
<span class="sd">            when present list join another list, and filterFunctionOnRight will be used when another list join</span>
<span class="sd">            present list.</span>
<span class="sd">        filterFunctionOnLeft : function</span>
<span class="sd">            This function has two parameter, presentList and anotherList, and must return a bool value.</span>
<span class="sd">            If true is returned, the element from another list will be added to present list. False means not added.</span>
<span class="sd">        targetAttrNameOnRight : str</span>
<span class="sd">            The attribute name of another list that you want to use to mark collected elements from present list.</span>
<span class="sd">        filterFunctionOnRight : function</span>
<span class="sd">            This function has two parameter, presentList and anotherList, and must return a bool value.</span>
<span class="sd">            If true is returned, the element from present list will be added to another list. False means not added.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">unsymmetrical</span><span class="p">:</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">adjustedFilterFunctionOnRight</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">filterFunctionOnRight</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">anotherList</span><span class="p">,</span><span class="n">targetAttrNameOnLeft</span><span class="p">,</span><span class="n">filterFunctionOnLeft</span><span class="p">)</span>
            <span class="n">anotherList</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">targetAttrNameOnRight</span><span class="p">,</span><span class="n">adjustedFilterFunctionOnRight</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">adjustedFilterFunctionOnRight</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">filterFunction</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">anotherList</span><span class="p">,</span><span class="n">targetAttrNameOnLeft</span><span class="p">,</span><span class="n">filterFunction</span><span class="p">)</span>
            <span class="n">anotherList</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">targetAttrNameOnRight</span><span class="p">,</span><span class="n">adjustedFilterFunctionOnRight</span><span class="p">)</span></div>


<div class="viewcode-block" id="operation.scale">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">targetAttrName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">filterFunction</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element, find the attribute value and calculate the portion of each element to the sum,</span>
<span class="sd">        given attribute name.</span>

<span class="sd">        After calling this function, a &#39;scaled_attrName&#39; attribute will be added to each element.</span>

<span class="sd">        This function is very like pandas.DataFrame.groupby.agg.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName :str</span>
<span class="sd">            The attribute which you want to scale.</span>
<span class="sd">        targetAttrName : str</span>
<span class="sd">            The attribute name that you want to use to mark the portion of element.</span>
<span class="sd">        filterFunction : function</span>
<span class="sd">            This function has one parameter, element, and must return a bool value.</span>
<span class="sd">            If true is returned, the element will be include when process scale.</span>
<span class="sd">            False means not included.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">targetAttrName</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">targetAttrName</span> <span class="o">=</span> <span class="s1">&#39;scaled_&#39;</span><span class="o">+</span><span class="n">attrName</span>
        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span>
        <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">filterFunction</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
        <span class="n">scaled</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">/</span><span class="n">total</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">objList</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">targetAttrName</span><span class="p">,</span><span class="n">scaledValue</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span><span class="p">,</span><span class="n">scaledValue</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">scaled</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">objList</span><span class="p">)</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">targetAttrName</span><span class="p">,</span> <span class="n">scaledValue</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">scaledValue</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="n">scaled</span><span class="p">)]</span>
            <span class="k">return</span> <span class="n">tmpObj</span></div>


<div class="viewcode-block" id="operation.merge">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.merge">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">,</span> <span class="n">how</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will merge two RiskQuantLib list object. This function should only</span>
<span class="sd">        be used when washing data. After merge, any change to source list will or will not</span>
<span class="sd">        influence merge result, depending on python copy mechanism. This won&#39;t be a problem</span>
<span class="sd">        if data flows by single direction. However, troubles will come when you wish to</span>
<span class="sd">        change the origin to influence the merge result list, after merge action.</span>

<span class="sd">        In short, do not change the origin list once you merge them, any change should be</span>
<span class="sd">        done by merged result.</span>

<span class="sd">        If &#39;on&#39; function can not identify the only element to merge, all unique attributes</span>
<span class="sd">        of the elements that meet requirement will be added to present list element.</span>
<span class="sd">        (Unique means this attribute only appears once in the list element, the others</span>
<span class="sd">        don&#39;t have it.) If the attribute appears more than one times, only the first will</span>
<span class="sd">        be added.</span>

<span class="sd">        It&#39;s like pandas.DataFrame.merge, but not totally the same. In RiskQuantLib,</span>
<span class="sd">        listA.merge(listB) is not the same from listB.merge(listA), even if you specify</span>
<span class="sd">        the same value of parameter &#39;how&#39; and &#39;on&#39;.</span>

<span class="sd">        No matter what value parameter &#39;how&#39; is given, attributes of elements in anotherList that</span>
<span class="sd">        meet requirement of &#39;on&#39; will be added as attributes of elements in present list. The</span>
<span class="sd">        attributes who have the same name in both lists won&#39;t be copied, which means you can&#39;t</span>
<span class="sd">        merge two lists twice. (In the second time you merge them, the first list object has all</span>
<span class="sd">        attributes that anotherList has, so all attributes will be skipped, no attribute will be</span>
<span class="sd">        copied.)</span>

<span class="sd">        If how == &#39;inner&#39;, only the elements in the present list who have relative elements</span>
<span class="sd">        in anotherList will be returned.</span>

<span class="sd">        If how == &#39;outer&#39;, all elements in presentList, plus elements from anotherList that</span>
<span class="sd">        don&#39;t have relative elements in present list will be returned.</span>

<span class="sd">        If how == &#39;left&#39;, all elements in presentList will be returned.</span>

<span class="sd">        if how == &#39;right&#39;, the elements in the present list who have relative elements</span>
<span class="sd">        in anotherList, plus elements from anotherList that don&#39;t have relative elements</span>
<span class="sd">        in present list will be returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">trySetAttr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">attrValue</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">attrValue</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="n">leftList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
            <span class="n">rightList</span> <span class="o">=</span> <span class="n">anotherList</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">leftList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">all</span>
            <span class="n">rightList</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">anotherList</span><span class="p">)</span>
        <span class="n">inner</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;left&#39;</span><span class="p">:</span><span class="n">left</span><span class="p">,</span><span class="s1">&#39;right&#39;</span><span class="p">:</span><span class="n">right</span><span class="p">}</span> <span class="k">for</span> <span class="n">left</span> <span class="ow">in</span> <span class="n">leftList</span> <span class="k">for</span> <span class="n">right</span> <span class="ow">in</span> <span class="n">rightList</span> <span class="k">if</span> <span class="n">on</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="n">right</span><span class="p">)]</span>
        <span class="n">leftInner</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">]))</span>
        <span class="n">rightInner</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">]))</span>
        <span class="n">leftResidual</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">leftList</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">leftInner</span><span class="p">]</span>
        <span class="n">rightResidual</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rightList</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rightInner</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">leftInner</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">inner</span><span class="p">):</span>
            <span class="p">[[</span><span class="n">trySetAttr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span><span class="n">attr</span><span class="p">,</span><span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">],</span><span class="n">attr</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span><span class="n">attr</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">])]</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">:</span>
                <span class="p">[</span><span class="n">trySetAttr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span> <span class="n">attr</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">],</span> <span class="n">attr</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span> <span class="n">attr</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">])]</span>
        <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;outer&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span><span class="o">+</span><span class="n">leftResidual</span><span class="o">+</span><span class="n">rightResidual</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;inner&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span> <span class="o">+</span> <span class="n">leftResidual</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span> <span class="o">+</span> <span class="n">rightResidual</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmpObj</span></div>


<div class="viewcode-block" id="operation.zip">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.zip">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrNameList</span> <span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will convert the values of given attribute into a zip object.</span>
<span class="sd">        If you also pass an external list or other iterable object, it will zip that</span>
<span class="sd">        list with the value of given internal attribute.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameList : str or list</span>
<span class="sd">            The attribute name whose values you want to zip.</span>
<span class="sd">        args : list or iterable</span>
<span class="sd">            External iterable object, whose value is zipped with internal attribute values.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        zip object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argsMerged</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="bp">self</span><span class="p">[</span><span class="n">attrName</span><span class="p">]</span> <span class="k">for</span> <span class="n">attrName</span> <span class="ow">in</span> <span class="n">attrNameList</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">argsMerged</span><span class="p">)</span></div>


<div class="viewcode-block" id="operation.toDict">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.toDict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">toDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrNameAsKey</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attrNameAsValue</span> <span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will return a dict, given the attribute name whose values are used as dict key,</span>
<span class="sd">        and attribute name whose values are used as dict value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameAsKey : str</span>
<span class="sd">            The attribute name whose values you want to use as dict keys.</span>
<span class="sd">        attrNameAsValue : str</span>
<span class="sd">            The attribute name whose values you want to use as dict values.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zip</span><span class="p">([</span><span class="n">attrNameAsKey</span><span class="p">,</span> <span class="n">attrNameAsValue</span><span class="p">]))</span></div>


<div class="viewcode-block" id="operation.toSeries">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.toSeries">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">toSeries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrNameAsValue</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">attrNameAsIndex</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">nameString</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will return a pandas.Series object, given the attribute name whose values are used as series</span>
<span class="sd">        value, and attribute name whose values are used as series index. You can also pass a string to identify the</span>
<span class="sd">        name of series.</span>

<span class="sd">        If you don&#39;t pass any attribute name, this function will use all elements themselves in this list to form</span>
<span class="sd">        a Series.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameAsValue : str</span>
<span class="sd">            The attribute name whose values you want to use as series value.</span>
<span class="sd">        attrNameAsIndex : str</span>
<span class="sd">            The attribute name whose values you want to use as series index.</span>
<span class="sd">        nameString : str</span>
<span class="sd">            The name of series.</span>
<span class="sd">        index : list or operation</span>
<span class="sd">            The index list. If you do not specify the attribute name used as index, you can pass a list as index manually.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pd.Series</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">nameString</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">attrNameAsValue</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">nameString</span><span class="p">)</span> <span class="k">if</span> <span class="n">index</span> <span class="k">else</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">nameString</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">attrNameAsIndex</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">attrNameAsValue</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">nameString</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span> <span class="k">if</span> <span class="n">index</span> <span class="k">else</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">attrNameAsValue</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">nameString</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">attrNameAsValue</span><span class="p">],</span> <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">attrNameAsIndex</span><span class="p">],</span> <span class="n">name</span> <span class="o">=</span> <span class="n">nameString</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="operation.toDF">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.toDF">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">toDF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrNameList</span> <span class="p">:</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">list</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">attrNameAsIndex</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will return a pandas.DataFrame object, given the attribute name whose values are used as dataframe</span>
<span class="sd">        value, and attribute name whose values are used as dataframe index.</span>

<span class="sd">        If you don&#39;t pass any attribute name, this function will use all elements themselves in this list to form</span>
<span class="sd">        a dataframe.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameList : str or list</span>
<span class="sd">            The attribute name whose values you want to use as dataframe value.</span>
<span class="sd">        attrNameAsIndex : str</span>
<span class="sd">            The attribute name whose values you want to use as dataframe index.</span>
<span class="sd">        index : list or operation</span>
<span class="sd">            The index list. If you do not specify the attribute name used as index, you can pass a list as index manually.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pd.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">attrNameList</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span> <span class="k">if</span> <span class="n">index</span> <span class="k">else</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrNameList</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">attrNameList</span> <span class="o">=</span> <span class="p">[</span><span class="n">attrNameList</span><span class="p">]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">attrNameList</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">attrNameAsIndex</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">index</span> <span class="k">if</span> <span class="n">index</span> <span class="k">else</span> <span class="n">result</span><span class="o">.</span><span class="n">index</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dfIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">attrNameAsIndex</span><span class="p">]</span>
        <span class="n">result</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">dfIndex</span>
        <span class="k">return</span> <span class="n">result</span></div>



<div class="viewcode-block" id="operation.toArray">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.toArray">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">toArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrNameList</span> <span class="p">:</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">list</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will return a numpy.ndarray object, given the attribute name whose values are used as array</span>
<span class="sd">        value.</span>

<span class="sd">        If you don&#39;t pass any attribute name, this function will use all elements themselves in this list to form</span>
<span class="sd">        an array.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameList : str or list</span>
<span class="sd">            The attribute name whose values you want to use as array value.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        np.ndarray</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">attrNameList</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrNameList</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">attrNameList</span> <span class="o">=</span> <span class="p">[</span><span class="n">attrNameList</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toDF</span><span class="p">(</span><span class="n">attrNameList</span><span class="p">)</span><span class="o">.</span><span class="n">values</span></div>


<div class="viewcode-block" id="operation.toList">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.toList">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">toList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrNameList</span><span class="p">:</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">list</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will return a list object, given the attribute name whose values are used as list</span>
<span class="sd">        value.</span>

<span class="sd">        If you don&#39;t pass any attribute name, this function will use all elements themselves in this list to form</span>
<span class="sd">        a new list.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameList : str or list</span>
<span class="sd">            The attribute name whose values you want to use as list value.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">attrNameList</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrNameList</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">attrNameList</span> <span class="o">=</span> <span class="p">[</span><span class="n">attrNameList</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">ele</span><span class="p">,</span><span class="n">attr</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrNameList</span><span class="p">]</span> <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span></div>


<div class="viewcode-block" id="operation.fromDF">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.fromDF">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fromDF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will convert a dataframe to RiskQuantLib list object. If</span>
<span class="sd">        there is already elements in present list, all elements will be deleted.</span>

<span class="sd">        The column name of dataframe should be in English, and this function</span>
<span class="sd">        will try to set it to element attribute if there exists the attribute</span>
<span class="sd">        with the same name. That is, this function will only set value of</span>
<span class="sd">        registered attribute. If not registered in current list class, it</span>
<span class="sd">        will be skipped.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        df : pd.DataFrame</span>
<span class="sd">            The dataframe you want to pull data from.</span>
<span class="sd">        code : str</span>
<span class="sd">            The column name that you want to mark as &#39;code&#39; attribute.</span>
<span class="sd">        name : str</span>
<span class="sd">            The column name that you want to mark as &#39;name&#39; attribute.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib List</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__elementClass__&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The List Must Have Attribute Named __elementClass__ To Call This Function.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">([])</span>
            <span class="n">instrumentNameString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__elementClass__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">c_instrumentNameString</span> <span class="o">=</span> <span class="n">instrumentNameString</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="n">instrumentNameString</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">None</span><span class="p">)(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">code</span><span class="o">!=</span><span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">name</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span><span class="p">)(</span><span class="n">df</span><span class="p">[</span><span class="n">code</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">code</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span><span class="p">)(</span><span class="n">df</span><span class="p">[</span><span class="n">code</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">code</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">name</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span><span class="p">)(</span><span class="n">df</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">trySetAttr</span><span class="p">(</span><span class="n">attrName</span><span class="p">,</span><span class="n">pdseries</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">c_attrName</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">c_attrName</span><span class="p">):</span>
                        <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">c_attrName</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">None</span><span class="p">)(</span><span class="bp">self</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">],</span><span class="n">pdseries</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="p">[</span><span class="n">trySetAttr</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">])</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="operation.addFromDF">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.addFromDF">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">addFromDF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">code</span> <span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will add elements from a dataframe. If there is already</span>
<span class="sd">        elements in present list, all elements will be kept, while new elements</span>
<span class="sd">        will be added.</span>

<span class="sd">        The column name of dataframe should be in English, and this function</span>
<span class="sd">        will try to set it to element attribute if there exists the attribute</span>
<span class="sd">        with the same name. That is, this function will only set value of</span>
<span class="sd">        registered attribute. If not registered in current list class, it</span>
<span class="sd">        will be skipped.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        df : pd.DataFrame</span>
<span class="sd">            The dataframe you want to pull data from.</span>
<span class="sd">        code : str</span>
<span class="sd">            The column name that you want to mark as &#39;code&#39; attribute.</span>
<span class="sd">        name : str</span>
<span class="sd">            The column name that you want to mark as &#39;name&#39; attribute.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib List</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmpList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
        <span class="n">tmpList</span><span class="o">.</span><span class="n">fromDF</span><span class="p">(</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">tmpList</span><span class="o">.</span><span class="n">all</span><span class="p">)</span></div>


<div class="viewcode-block" id="operation.fromIterable">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.fromIterable">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fromIterable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">code</span> <span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will convert an iterable to RiskQuantLib list object. If</span>
<span class="sd">        there is already elements in present list, all elements will be deleted.</span>

<span class="sd">        This function will only set value of registered attribute. If not</span>
<span class="sd">        registered in current list class, it will be skipped.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        iterable : list</span>
<span class="sd">            The iterable object you want to pull data from.</span>
<span class="sd">        code : str</span>
<span class="sd">            The attribute name of iterable that you want to</span>
<span class="sd">            mark as &#39;code&#39; in RiskQuantLib List Object.</span>
<span class="sd">        name : str</span>
<span class="sd">            The attribute name of iterable that you want to</span>
<span class="sd">            mark as &#39;name&#39; in RiskQuantLib List Object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib List</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__elementClass__&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The List Must Have Attribute Named __elementClass__ To Call This Function.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">([])</span>
            <span class="n">instrumentNameString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__elementClass__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">c_instrumentNameString</span> <span class="o">=</span> <span class="n">instrumentNameString</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="n">instrumentNameString</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">None</span><span class="p">)([</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)],[</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">code</span><span class="o">!=</span><span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">name</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span><span class="p">)([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">code</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)],</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">code</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span><span class="p">)([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">code</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)],</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">code</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">name</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span> <span class="o">+</span> <span class="n">c_instrumentNameString</span> <span class="o">+</span> <span class="s1">&#39;Series&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span><span class="p">)([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)],</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterable</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">trySetAttr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">attrValue</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">c_attrName</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">c_attrName</span><span class="p">):</span>
                        <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">c_attrName</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="kc">None</span><span class="p">)(</span><span class="n">attrValue</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="p">[[</span><span class="n">trySetAttr</span><span class="p">(</span><span class="n">instrumentObj</span><span class="p">,</span><span class="n">attr</span><span class="p">,</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attr</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">)]</span> <span class="k">for</span> <span class="n">obj</span><span class="p">,</span><span class="n">instrumentObj</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)]</span>
            <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="operation.addFromIterable">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.addFromIterable">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">addFromIterable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">code</span> <span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will add elements from an iterable object. If there is already</span>
<span class="sd">        elements in present list, all elements will be kept, while new elements</span>
<span class="sd">        will be added.</span>

<span class="sd">        This function will only set value of registered attribute. If not</span>
<span class="sd">        registered in current list class, it will be skipped.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        iterable : list</span>
<span class="sd">            The iterable object you want to pull data from.</span>
<span class="sd">        code : str</span>
<span class="sd">            The attribute name of iterable that you want to</span>
<span class="sd">            mark as &#39;code&#39; in RiskQuantLib List Object.</span>
<span class="sd">        name : str</span>
<span class="sd">            The attribute name of iterable that you want to</span>
<span class="sd">            mark as &#39;name&#39; in RiskQuantLib List Object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib List</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmpList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
        <span class="n">tmpList</span><span class="o">.</span><span class="n">fromIterable</span><span class="p">(</span><span class="n">iterable</span><span class="o">=</span><span class="n">iterable</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">tmpList</span><span class="o">.</span><span class="n">all</span><span class="p">)</span></div>


<div class="viewcode-block" id="operation.updateAttr">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.updateAttr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">updateAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">codeSeries</span><span class="p">,</span> <span class="n">valueSeries</span><span class="p">,</span> <span class="n">byAttr</span> <span class="o">=</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will update the attribute value of elements whose code</span>
<span class="sd">        appears in given codeSeries. If code of element doesn&#39;t show in</span>
<span class="sd">        codeSeries, these elements will be skipped and not changed.</span>

<span class="sd">        If the attribute is not registered, it will be created.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute whose value is exactly what you want to update.</span>
<span class="sd">        codeSeries : list</span>
<span class="sd">            An iterable object that contains codes of elements whose attribute need to be updated.</span>
<span class="sd">        valueSeries : list</span>
<span class="sd">            An iterable object that contains new values of attributes.</span>
<span class="sd">        byAttr : str</span>
<span class="sd">            The attribute that is used to index element in this list. By default, this attribute is code.</span>
<span class="sd">            But you can specify another attribute A, if you do it, this function will update the attribute</span>
<span class="sd">            value of elements whose attribute A appears in given codeSeries.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">setAttr</span><span class="p">(</span><span class="n">totalList</span><span class="p">,</span><span class="n">attrNameNotRegistered</span><span class="p">,</span><span class="n">codeSeriesNotRegistered</span><span class="p">,</span><span class="n">valueSeriesNotRegistered</span><span class="p">,</span><span class="n">byAttrNotRegistered</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">codeSeriesNotRegistered</span><span class="p">)</span>
            <span class="n">updateList</span> <span class="o">=</span> <span class="n">totalList</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">byAttrNotRegistered</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="ow">in</span> <span class="n">index</span><span class="p">)</span>
            <span class="n">setDict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">codeSeriesNotRegistered</span><span class="p">,</span><span class="n">valueSeriesNotRegistered</span><span class="p">))</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrNameNotRegistered</span><span class="p">,</span><span class="n">setDict</span><span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">byAttrNotRegistered</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">updateList</span><span class="p">]</span>
            <span class="n">newCreated</span> <span class="o">=</span> <span class="n">totalList</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">attrNameNotRegistered</span><span class="p">))</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrNameNotRegistered</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">newCreated</span><span class="p">]</span>
        <span class="n">c_attrName</span> <span class="o">=</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="n">attrName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">c_attrName</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">k</span><span class="p">:</span><span class="n">setAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))(</span><span class="n">codeSeries</span><span class="p">,</span><span class="n">valueSeries</span><span class="p">,</span><span class="n">byAttr</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span></div>



<div class="viewcode-block" id="operation.updateAttrFromSeries">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.updateAttrFromSeries">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">updateAttrFromSeries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sr</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">attrName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">byAttr</span> <span class="o">=</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will update attribute value of current list by passed series.</span>
<span class="sd">        The name of passes series should be in English, and if current</span>
<span class="sd">        list has registered attribute whose name is the same with column name, it will</span>
<span class="sd">        be updated. If the attribute is not registered, it will be created.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sr : pd.Series</span>
<span class="sd">            The series that you want to update data from.</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute whose value is exactly what you want to update.</span>
<span class="sd">        byAttr : str</span>
<span class="sd">            The attribute that is used to index element in this list. By default, this attribute is code.</span>
<span class="sd">            But you can specify another attribute A, if you do it, this function will update the attribute</span>
<span class="sd">            value of elements whose attribute A appears in df[code] or df.index.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attrName</span> <span class="o">=</span> <span class="n">sr</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">attrName</span><span class="o">==</span><span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="n">attrName</span>
        <span class="k">if</span> <span class="n">attrName</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateAttr</span><span class="p">(</span><span class="n">attrName</span><span class="p">,</span> <span class="n">sr</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">sr</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">byAttr</span><span class="o">=</span><span class="n">byAttr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can not update from a series without name if you don&#39;t pass an attrName.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="operation.updateAttrFromDF">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.updateAttrFromDF">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">updateAttrFromDF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">byAttr</span> <span class="o">=</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will update attribute value of current list by passed dataframe.</span>
<span class="sd">        The column name of passes dataframe should be in English, and if current</span>
<span class="sd">        list has registered attribute whose name is the same with column name, it will</span>
<span class="sd">        be updated. If the attribute is not registered, it will be created.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        df : pd.DataFrame</span>
<span class="sd">            The dataframe that you want to update data from.</span>
<span class="sd">        code : str</span>
<span class="sd">            A column name of df that you used to mark rows. Elements whose code</span>
<span class="sd">            is in this column will be updated, and those not in this column will</span>
<span class="sd">            not be influenced. If blank, the index of df will be used as code.</span>
<span class="sd">        byAttr : str</span>
<span class="sd">            The attribute that is used to index element in this list. By default, this attribute is code.</span>
<span class="sd">            But you can specify another attribute A, if you do it, this function will update the attribute</span>
<span class="sd">            value of elements whose attribute A appears in df[code] or df.index.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">updateAttr</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">byAttr</span><span class="o">=</span><span class="n">byAttr</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">updateAttr</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">code</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">byAttr</span><span class="o">=</span><span class="n">byAttr</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span></div>


<div class="viewcode-block" id="operation.updateAttrFromArray">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.updateAttrFromArray">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">updateAttrFromArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">codeList</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">attributeNameList</span><span class="p">:</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">,</span> <span class="n">byAttr</span> <span class="o">=</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will update attribute value of current list by passed array.</span>
<span class="sd">        You have to identify that each column of array belongs to which attribute, and</span>
<span class="sd">        each row of array represents which element.</span>

<span class="sd">        The row number of passed array must equal to length of codeList, and the column</span>
<span class="sd">        number of passed array must equal to length of attributeNameList.</span>

<span class="sd">        If the attribute are not registered, the attribute will be created.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        array : np.ndarray</span>
<span class="sd">            The array you which want to update this list from.</span>
<span class="sd">        codeList : list</span>
<span class="sd">            The code of element whose attribute will be updated by this function. Those whose code</span>
<span class="sd">            is not specified in this list will not be influenced. The length of this list must equal</span>
<span class="sd">            to the row number of passed array.</span>
<span class="sd">        attributeNameList : str or list</span>
<span class="sd">            The attribute that you want to update. Those attribute in this list will be updated, and those</span>
<span class="sd">            are not in this list will not be influenced.</span>
<span class="sd">        byAttr : str</span>
<span class="sd">            The attribute that is used to index element in this list. By default, this attribute is code.</span>
<span class="sd">            But you can specify another attribute A, if you do it, this function will update the attribute</span>
<span class="sd">            value of elements whose attribute A appears in given codeList.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attributeNameList</span> <span class="o">=</span> <span class="p">[</span><span class="n">attributeNameList</span><span class="p">]</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">attributeNameList</span><span class="p">)</span><span class="o">==</span><span class="nb">str</span> <span class="k">else</span> <span class="n">attributeNameList</span>
        <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">updateAttr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">codeList</span><span class="p">,</span> <span class="n">array</span><span class="p">[:,</span><span class="n">index</span><span class="p">],</span> <span class="n">byAttr</span><span class="o">=</span><span class="n">byAttr</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">attr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">attributeNameList</span><span class="p">)]</span></div>


<div class="viewcode-block" id="operation.updateAttrFromDict">
<a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.operation.operation.updateAttrFromDict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">updateAttrFromDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">codeValueDict</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">byAttr</span> <span class="o">=</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will update attribute value of current list by passed dict.</span>
<span class="sd">        The key of passes dict should be code string. If current list has registered</span>
<span class="sd">        attribute whose name is in keys of codeValueDict, it will be updated. If the attribute</span>
<span class="sd">        is not registered, it will be created.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute whose value is exactly what you want to update.</span>
<span class="sd">        codeValueDict : dict</span>
<span class="sd">            A dict that maps code to value.</span>
<span class="sd">        byAttr : str</span>
<span class="sd">            The attribute that is used to index element in this list. By default, this attribute is code.</span>
<span class="sd">            But you can specify another attribute A, if you do it, this function will update the attribute</span>
<span class="sd">            value of elements whose attribute A appears in given codeValueDict.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateAttr</span><span class="p">(</span><span class="n">attrName</span><span class="p">,</span><span class="n">codeValueDict</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span><span class="n">codeValueDict</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">byAttr</span><span class="o">=</span><span class="n">byAttr</span><span class="p">)</span></div>
</div>


    <span class="c1">#&lt;operation&gt;</span>
    <span class="c1">#&lt;/operation&gt;</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>