

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>RiskQuantLib.Operation.listBaseOperation &mdash; RiskQuantLib 0.0.24 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/readthedocs-custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> RiskQuantLib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">RiskQuantLib</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">RiskQuantLib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../RiskQuantLib.html">RiskQuantLib</a> &raquo;</li>
        
      <li>RiskQuantLib.Operation.listBaseOperation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for RiskQuantLib.Operation.listBaseOperation</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1">#coding = utf-8</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span><span class="n">delayed</span>
<span class="kn">from</span> <span class="nn">RiskQuantLib.Operation.loc</span> <span class="kn">import</span> <span class="n">loc</span>
<span class="kn">from</span> <span class="nn">RiskQuantLib.Tool.strTool</span> <span class="kn">import</span> <span class="n">changeSecurityListToStr</span>

<div class="viewcode-block" id="listBase"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase">[docs]</a><span class="k">class</span> <span class="nc">listBase</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    listBase() is the function class that makes all RiskQuantLib list object functional.</span>
<span class="sd">    Any RiskQuantLib list class should inherit from this class to own certain functions,</span>
<span class="sd">    such as groupBy, execFunc, etc.</span>

<span class="sd">    Users can define their own functions here to set new attribute function to</span>
<span class="sd">    RiskQuantLib list class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="listBase.setAll"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.setAll">[docs]</a>    <span class="k">def</span> <span class="nf">setAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">List</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update all elements by the list of new elements. Old elements will be deleted.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        List : list</span>
<span class="sd">            A collection of RiskQuantLib instrument objects.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">=</span> <span class="n">List</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__init_get_item__</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function makes RiqkQuantLib list object selectable. Use [] to call this function.</span>
<span class="sd">        Mixed index is used here. By calling [], you can index either element or attribute.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item : str or list or slice</span>
<span class="sd">            If a string is given, all elements will be examined, if &#39;code&#39; attribute equals</span>
<span class="sd">            to the given string, return the first element that meets this requirement.</span>

<span class="sd">            If no element code meets this requirement, try to return a list of attribute</span>
<span class="sd">            value, whose name equals to the given string.</span>

<span class="sd">            If a slice or int number is given, this function behaves like iloc, returns the</span>
<span class="sd">            item-th element or a collection of elements.</span>

<span class="sd">            If a list is given, return all elements whose code in the given list. If no code</span>
<span class="sd">            in the given list, return a 2-dimension array of attribute values, where attribute</span>
<span class="sd">            name is in the given list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">item</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">item</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">slice</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">item</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmpList</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">tmpList</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">propertyArray</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">item</span><span class="p">]</span>
                <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">propertyArray</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__iterNum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__iterNum</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__iterNum</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">target</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a RiskQuantLib list object to a list or another RiskQuantLib list object.</span>
<span class="sd">        All attributes of the RiskQuantLib list will be neglected, only elements will be added to</span>
<span class="sd">        the merged list.</span>

<span class="sd">        This use shallow copy. After add finish, all elements refer to the original</span>
<span class="sd">        elements. Change to the original will render to changes of the results. If</span>
<span class="sd">        you want to use a deep copy add, call &#39;.add()&#39; rather than use &#39;+&#39;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : list or RiskQuantLib list</span>
<span class="sd">            The other RiskQuantLib list object or a collection of RiskQuantLib instrument object.</span>
<span class="sd">        useObj : bool</span>
<span class="sd">            If true, return a RiskQuantLib list object; if false, return a list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list or RiskQuantLib list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Subtract a list or another RiskQuantLib list object from a RiskQuantLib list object.</span>
<span class="sd">        All attributes of the RiskQuantLib list will be neglected, only elements will be subtracted</span>
<span class="sd">        from the first list.</span>

<span class="sd">        This use shallow copy. After sub finish, all elements refer to the original</span>
<span class="sd">        elements. Change to the original will render to changes of the results. If</span>
<span class="sd">        you want to use a deep copy sub, call &#39;.sub()&#39; rather than use &#39;-&#39;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : list or RiskQuantLib list</span>
<span class="sd">            The other RiskQuantLib list object or a collection of RiskQuantLib instrument object.</span>
<span class="sd">        useObj : bool</span>
<span class="sd">            If true, return a RiskQuantLib list object; if false, return a list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list or RiskQuantLib list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This returns a list of string, showing the code of each element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">changeSecurityListToStr</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns the length of RiskQuantLib list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_sortIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sortObj</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
        <span class="n">sortList</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sortObj</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sortObj</span><span class="p">,</span><span class="n">i</span><span class="p">))</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">())</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sortObj</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">sortList</span><span class="p">)</span>

<div class="viewcode-block" id="listBase.add"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function uses deep copy. It returns the addition of copies of two RiskQuantLib lists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">all</span></div>

<div class="viewcode-block" id="listBase.sub"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.sub">[docs]</a>    <span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">useObj</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function uses deep copy. It returns the subtraction of copies of two RiskQuantLib lists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">all</span></div>

<div class="viewcode-block" id="listBase.uniqueCode"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.uniqueCode">[docs]</a>    <span class="k">def</span> <span class="nf">uniqueCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">keep</span> <span class="o">=</span> <span class="s1">&#39;First&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns a RiskQuantLib list object, where the code value</span>
<span class="sd">        is unique.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, operation will done in present list object.</span>
<span class="sd">            If false, operation will done in a copy of present list object.</span>
<span class="sd">        keep : str</span>
<span class="sd">            Only support &#39;First&#39; or &#39;Last&#39;. If multiple elements have the same</span>
<span class="sd">            code value. The first or last element will be kept, given your choice.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib list object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">codeList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">code</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;First&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;Last&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;uniqueCode Function Can Only Accept &#39;Keep&#39; Parameter as First or Last&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">([[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">codeList</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">codeList</span><span class="p">]</span></div>

<div class="viewcode-block" id="listBase.uniqueAttr"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.uniqueAttr">[docs]</a>    <span class="k">def</span> <span class="nf">uniqueAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">keep</span> <span class="o">=</span> <span class="s1">&#39;First&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns a RiskQuantLib list object, where the attribute value</span>
<span class="sd">        is unique.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrNameString :str</span>
<span class="sd">            The attribute name that you want to get the unique value list from.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, operation will done in present list object.</span>
<span class="sd">            If false, operation will done in a copy of present list object.</span>
<span class="sd">        keep : str</span>
<span class="sd">            Only support &#39;First&#39; or &#39;Last&#39;. If multiple elements have the same</span>
<span class="sd">            attribute value. The first or last element will be kept, given your choice.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        RiskQuantLib list object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">propertyValueList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">)]))</span>
        <span class="k">if</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;First&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">keep</span> <span class="o">==</span> <span class="s1">&#39;Last&#39;</span><span class="p">:</span>
            <span class="n">keepIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;uniqueAttr Function Can Only Accept &#39;Keep&#39; Parameter as First or Last&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">([[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyValueList</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">attrNameString</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="n">keepIndex</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyValueList</span><span class="p">]</span></div>

<div class="viewcode-block" id="listBase.apply"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.apply">[docs]</a>    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">applyFunction</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will apply the given function to each element of RiskQuantLib list.</span>
<span class="sd">        Default settings will leave any change to element out. Your change to elements won&#39;t</span>
<span class="sd">        be kept. Only the result of applyFunction is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">())(</span><span class="n">delayed</span><span class="p">(</span><span class="n">applyFunction</span><span class="p">)(</span><span class="n">i</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span></div>

<div class="viewcode-block" id="listBase.groupBy"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.groupBy">[docs]</a>    <span class="k">def</span> <span class="nf">groupBy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function use pandas.DataFrame.groupby as engine. Its behavior is totally</span>
<span class="sd">        the same with pandas.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute that you want to group data by.</span>
<span class="sd">        useObj : bool</span>
<span class="sd">            If true, return a RiskQuantLib list object, each element of which is also a</span>
<span class="sd">            RiskQuantLib list object. Each element will be marked by setting the attribute</span>
<span class="sd">            as the common value.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, operation will be done in present RiskQuantLib list object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="n">attrName</span> <span class="o">=</span> <span class="p">[</span><span class="n">attrName</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">groupBy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">attrName</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]])</span>
        <span class="n">groupBy</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">groupBy</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">attrName</span><span class="p">)[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span>

        <span class="n">attrValueList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(</span><span class="nb">tuple</span><span class="p">())</span> <span class="k">else</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
        <span class="n">securityList</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
                <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">attrValueList</span><span class="p">]</span>
                <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">objList</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">attrValueList</span><span class="p">]</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">objList</span><span class="p">,</span><span class="n">securityList</span><span class="p">)]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">attrName</span><span class="p">[</span><span class="n">q</span><span class="p">],</span><span class="n">i</span><span class="p">[</span><span class="n">q</span><span class="p">])</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">attrName</span><span class="p">))]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">attrValueList</span><span class="p">,</span><span class="n">objList</span><span class="p">)]</span>
            <span class="n">returnObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">objList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">returnObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">attrValueList</span><span class="p">,</span><span class="n">securityList</span><span class="p">))</span></div>

<div class="viewcode-block" id="listBase.sum"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.sum">[docs]</a>    <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will sum the value of each element, given the attribute name.</span>
<span class="sd">        If some elements don&#39;t have the attribute, an numpy.nan will be used, and</span>
<span class="sd">        the result will skip this value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute name whose value you want to sum.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, the &#39;attributeSum&#39; property will be added to present object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="o">+</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nansum</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nansum</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">])</span></div>

<div class="viewcode-block" id="listBase.mean"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.mean">[docs]</a>    <span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will average the value of each element, given the attribute name.</span>
<span class="sd">        If some elements don&#39;t have the attribute, an numpy.nan will be used, and</span>
<span class="sd">        the result will skip this value when calculating mean.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute name whose value you want to average.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, the &#39;attributeMean&#39; property will be added to present object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="o">+</span><span class="s1">&#39;Mean&#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">])</span></div>

<div class="viewcode-block" id="listBase.std"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.std">[docs]</a>    <span class="k">def</span> <span class="nf">std</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will calculate the standard deviation of value of each element,</span>
<span class="sd">        given the attribute name. If some elements don&#39;t have the attribute, an numpy.nan will be used, and</span>
<span class="sd">        the result will skip this value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName : str</span>
<span class="sd">            The attribute name whose value you want to calculate standard deviation.</span>
<span class="sd">        inplace : bool</span>
<span class="sd">            If true, the &#39;attributeStd&#39; property will be added to present object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="o">+</span><span class="s1">&#39;Std&#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">])</span></div>

<div class="viewcode-block" id="listBase.execFunc"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.execFunc">[docs]</a>    <span class="k">def</span> <span class="nf">execFunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">functionName</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will execute instance function for every element is present RiskQuantLib list object,</span>
<span class="sd">        given the function name. If some elements don&#39;t have the function, a Null function will be used, and</span>
<span class="sd">        the result will skip the execution for that element.</span>

<span class="sd">        If the length of present list is not long, list comprehension will be used. If it&#39;s a long</span>
<span class="sd">        list, joblib will be used to establish multiple threads.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        functionName : str</span>
<span class="sd">            The function that element has, and you want to call.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">1000</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">functionName</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="kc">None</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">(),</span><span class="n">require</span><span class="o">=</span><span class="s1">&#39;sharedmem&#39;</span><span class="p">)(</span><span class="n">delayed</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">functionName</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="kc">None</span><span class="p">))(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution Failed:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="listBase.copy"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">deep</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a copy of present RiskQuantLib list object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">deep</span><span class="p">:</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">__init_get_item__</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">tmp</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">__init_get_item__</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">tmp</span></div>

<div class="viewcode-block" id="listBase.sort"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.sort">[docs]</a>    <span class="k">def</span> <span class="nf">sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">propertyList</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span><span class="n">reverse</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sort the present RiskQuantLib list by attributes. You can also sort it by a single</span>
<span class="sd">        attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">propertyList</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">([]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span> <span class="o">=</span> <span class="p">[</span><span class="n">propertyList</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sortPropertyList</span> <span class="o">=</span> <span class="n">propertyList</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortIterator</span><span class="p">,</span><span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortIterator</span><span class="p">,</span><span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sortIterator</span><span class="p">,</span><span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="listBase.fillna"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.fillna">[docs]</a>    <span class="k">def</span> <span class="nf">fillna</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propertyList</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the nan value or blank string will the given value.</span>
<span class="sd">        If attribute doesn&#39;t exist, nothing will be done.</span>
<span class="sd">        You can fill the nan value by single attribute or a list of attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">RiskQuantLib.Tool.mathTool</span> <span class="kn">import</span> <span class="n">isnan</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">propertyList</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">([]):</span>
            <span class="n">propertyList</span> <span class="o">=</span> <span class="p">[</span><span class="n">propertyList</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpList</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
            <span class="p">[[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpList</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="p">[[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tmpList</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">propertyList</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tmpList</span></div>

    <span class="k">def</span> <span class="nf">__init_get_item__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__set_number_index__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;numberIndex&#39;</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)]</span>

<div class="viewcode-block" id="listBase.setIndex"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.setIndex">[docs]</a>    <span class="k">def</span> <span class="nf">setIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propertyNameString</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the index for each element, given attribute name. The index value will be set as the attribute value</span>
<span class="sd">        you choose.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">propertyNameString</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">propertyNameString</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tmpObj</span></div>

<div class="viewcode-block" id="listBase.dropIndex"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.dropIndex">[docs]</a>    <span class="k">def</span> <span class="nf">dropIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete index for each element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="p">[</span><span class="nb">delattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;index&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">[</span><span class="nb">delattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;index&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tmpObj</span></div>

<div class="viewcode-block" id="listBase.reIndex"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.reIndex">[docs]</a>    <span class="k">def</span> <span class="nf">reIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indexList</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a new RiskQuantLib list object whose elements are chosen according to</span>
<span class="sd">        the index, the index of new list element must be in th indexList to be included.</span>
<span class="sd">        If more than one elements meet requirement, only the first one will be kept.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmpList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indexList</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">tmpList</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">tmpList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tmpList</span></div>

<div class="viewcode-block" id="listBase.resetIndex"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.resetIndex">[docs]</a>    <span class="k">def</span> <span class="nf">resetIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the index as the n-th element of list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="p">[</span><span class="n">j</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)]</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">[</span><span class="n">j</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span><span class="p">)]</span>
            <span class="k">return</span> <span class="n">tmpObj</span></div>

<div class="viewcode-block" id="listBase.str"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.str">[docs]</a>    <span class="k">def</span> <span class="nf">str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>


<div class="viewcode-block" id="listBase.rolling"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.rolling">[docs]</a>    <span class="k">def</span> <span class="nf">rolling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">windowNumber</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element, This function will collect the n elements before</span>
<span class="sd">        that element, create a new RiskQuantLib list object to holding it. The new list</span>
<span class="sd">        will be set as an attribute of &#39;_rolling&#39;, thus the present element can reach to</span>
<span class="sd">        the information of its former elements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rollingList</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">[</span><span class="nb">max</span><span class="p">((</span><span class="n">i</span><span class="o">-</span><span class="n">windowNumber</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">):(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">rollingObj</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))]</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rollingObj</span><span class="p">]</span>
            <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rollingObj</span><span class="p">,</span><span class="n">rollingList</span><span class="p">)]</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;_rolling&#39;</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">rollingObj</span><span class="p">)]</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;_rolling_window&#39;</span><span class="p">,</span> <span class="n">windowNumber</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
            <span class="n">returnObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="n">returnObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">rollingObj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">returnObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rollingList</span></div>

<div class="viewcode-block" id="listBase.new"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.new">[docs]</a>    <span class="k">def</span> <span class="nf">new</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a totally new RiskQuantLib list object like this.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">tmpObj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">tmpObj</span></div>

<div class="viewcode-block" id="listBase.filter"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.filter">[docs]</a>    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filterFunction</span><span class="p">,</span><span class="n">useObj</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a RiskQuantLib list object given the fiter function.</span>
<span class="sd">        This is used to choose some elements which meet your requirements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resultList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">filterFunction</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">useObj</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">resultList</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tmpObj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">resultList</span></div>

<div class="viewcode-block" id="listBase.join"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.join">[docs]</a>    <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">anotherList</span><span class="p">,</span><span class="n">targetAttrName</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">filterFunction</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element, find all elements that meet requirements from another RiskQuantLib</span>
<span class="sd">        list object. The elements meeting requirement will be set as an attribute of present</span>
<span class="sd">        list.</span>

<span class="sd">        This function is very like pandas.DataFrame.merge.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anotherList : RiskQuantLib list or list</span>
<span class="sd">            Another list object, holding elements waiting to be selected.</span>
<span class="sd">        targetAttrName : str</span>
<span class="sd">            The attribute name that you want to use to mark collected elements from another list.</span>
<span class="sd">        filterFunction : function</span>
<span class="sd">            This function has two parameter, left and right, and must return a bool value.</span>
<span class="sd">            If true is returned, the element will be added. False means not added.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valueList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">another</span> <span class="k">for</span> <span class="n">another</span> <span class="ow">in</span> <span class="n">anotherList</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">filterFunction</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="n">another</span><span class="p">)]</span> <span class="k">for</span> <span class="n">this</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
        <span class="n">valueObj</span> <span class="o">=</span> <span class="p">[</span><span class="n">anotherList</span><span class="o">.</span><span class="n">new</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">]</span>
        <span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">valueObj</span><span class="p">,</span><span class="n">valueList</span><span class="p">)]</span>
        <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">targetAttrName</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">valueObj</span><span class="p">)]</span></div>

<div class="viewcode-block" id="listBase.scale"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.scale">[docs]</a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">targetAttrName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">filterFunction</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For each element, find the attribute value and calculate the portion of each element to the sum,</span>
<span class="sd">        given attribute name.</span>

<span class="sd">        After calling this function, a &#39;scaled_attrName&#39; attribute will be added to each element.</span>

<span class="sd">        This function is very like pandas.DataFrame.groupby.agg.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attrName :str</span>
<span class="sd">            The attribute which you want to scale.</span>
<span class="sd">        targetAttrName : str</span>
<span class="sd">            The attribute name that you want to use to mark the portion of element.</span>
<span class="sd">        filterFunction : function</span>
<span class="sd">            This function has one parameter, element, and must return a bool value.</span>
<span class="sd">            If true is returned, the element will be include when process scale.</span>
<span class="sd">            False means not included.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">targetAttrName</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">targetAttrName</span> <span class="o">=</span> <span class="s1">&#39;scaled_&#39;</span><span class="o">+</span><span class="n">attrName</span>
        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span>
        <span class="n">objList</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="k">if</span> <span class="n">filterFunction</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
        <span class="n">scaled</span> <span class="o">=</span> <span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">/</span><span class="n">total</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">objList</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">targetAttrName</span><span class="p">,</span><span class="n">scaledValue</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span><span class="p">,</span><span class="n">scaledValue</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">,</span><span class="n">scaled</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">objList</span><span class="p">)</span>
            <span class="p">[</span><span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">targetAttrName</span><span class="p">,</span> <span class="n">scaledValue</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">scaledValue</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">tmpObj</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="n">scaled</span><span class="p">)]</span>
            <span class="k">return</span> <span class="n">tmpObj</span></div>

<div class="viewcode-block" id="listBase.merge"><a class="viewcode-back" href="../../../RiskQuantLib.Operation.html#RiskQuantLib.Operation.listBaseOperation.listBase.merge">[docs]</a>    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anotherList</span><span class="p">,</span> <span class="n">how</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will merge two RiskQuantLib list object. This function should only</span>
<span class="sd">        be used when washing data. After merge, any change to source list will or will not</span>
<span class="sd">        influence merge result, depending on python copy mechanism. This won&#39;t be a problem</span>
<span class="sd">        if data flows by single direction. However, troubles will come when you wish to</span>
<span class="sd">        change the origin to influence the merge result list, after merge action.</span>

<span class="sd">        In short, do not change the origin list once you merge them, any change should be</span>
<span class="sd">        done by merged result.</span>

<span class="sd">        If &#39;on&#39; function can not identify the only element to merge, all unique attributes</span>
<span class="sd">        of the elements that meet requirement will be added to present list element.</span>
<span class="sd">        (Unique means this attribute only appears once in the list element, the others</span>
<span class="sd">        don&#39;t have it.) If the attribute appears more than one times, only the first will</span>
<span class="sd">        be added.</span>

<span class="sd">        It&#39;s like pandas.DataFrame.merge, but not totally the same. In RiskQuantLib,</span>
<span class="sd">        listA.merge(listB) is not the same from listB.merge(listA), even if you specify</span>
<span class="sd">        the same value of parameter &#39;how&#39; and &#39;on&#39;.</span>

<span class="sd">        No matter what value parameter &#39;how&#39; is given, attributes of elements in anotherList that</span>
<span class="sd">        meet requirement of &#39;on&#39; will be added as attributes of elements in present list. The</span>
<span class="sd">        attributes who have the same name in both lists won&#39;t be copied, which means you can&#39;t</span>
<span class="sd">        merge two lists twice. (In the second time you merge them, the first list object has all</span>
<span class="sd">        attributes that anotherList has, so all attributes will be skipped, no attribute will be</span>
<span class="sd">        copied.)</span>

<span class="sd">        If how == &#39;inner&#39;, only the elements in the present list who have relative elements</span>
<span class="sd">        in anotherList will be returned.</span>

<span class="sd">        If how == &#39;outer&#39;, all elements in presentList, plus elements from anotherList that</span>
<span class="sd">        don&#39;t have relative elements in present list will be returned.</span>

<span class="sd">        If how == &#39;left&#39;, all elements in presentList will be returned.</span>

<span class="sd">        if how == &#39;right&#39;, the elements in the present list who have relative elements</span>
<span class="sd">        in anotherList, plus elements from anotherList that don&#39;t have relative elements</span>
<span class="sd">        in present list will be returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">trySetAttr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">attrValue</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attrName</span><span class="p">,</span><span class="n">attrValue</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="n">leftList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span>
            <span class="n">rightList</span> <span class="o">=</span> <span class="n">anotherList</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">leftList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">all</span>
            <span class="n">rightList</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">anotherList</span><span class="p">)</span>
        <span class="n">inner</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;left&#39;</span><span class="p">:</span><span class="n">left</span><span class="p">,</span><span class="s1">&#39;right&#39;</span><span class="p">:</span><span class="n">right</span><span class="p">}</span> <span class="k">for</span> <span class="n">left</span> <span class="ow">in</span> <span class="n">leftList</span> <span class="k">for</span> <span class="n">right</span> <span class="ow">in</span> <span class="n">rightList</span> <span class="k">if</span> <span class="n">on</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="n">right</span><span class="p">)]</span>
        <span class="n">leftInner</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">]))</span>
        <span class="n">rightInner</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">]))</span>
        <span class="n">leftResidual</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">leftList</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">leftInner</span><span class="p">]</span>
        <span class="n">rightResidual</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rightList</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rightInner</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">leftInner</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">inner</span><span class="p">):</span>
            <span class="p">[[</span><span class="n">trySetAttr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span><span class="n">attr</span><span class="p">,</span><span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">],</span><span class="n">attr</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span><span class="n">attr</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">])]</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">inner</span><span class="p">:</span>
                <span class="p">[</span><span class="n">trySetAttr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span> <span class="n">attr</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">],</span> <span class="n">attr</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span> <span class="n">attr</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">])]</span>
        <span class="n">tmpObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;outer&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span><span class="o">+</span><span class="n">leftResidual</span><span class="o">+</span><span class="n">rightResidual</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;inner&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span> <span class="o">+</span> <span class="n">leftResidual</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
            <span class="n">tmpObj</span><span class="o">.</span><span class="n">setAll</span><span class="p">(</span><span class="n">leftInner</span> <span class="o">+</span> <span class="n">rightResidual</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmpObj</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright .

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>